%div{"ng-controller" => "roundsEditController","model"=>"#{@league.id}"}
  = link_to 'Generate empty',   generate_empty_league_path(@league), class: 'btn btn-default'
  = link_to 'Generate filled',   generate_filled_league_path(@league), class: 'btn btn-default'
  = link_to 'Back to edit league',   edit_league_path(@league), class: 'btn btn-default'

  %h1{"ng-bind"=>"league.name"}

  - if @rounds.first
    - if @league.updated_at > @rounds.first.updated_at
      %p League was updated.

  %br
  Players:
  = @players.size
  %br
  Rounds:
  = @rounds.size
  %br
  Matches:
  = @matches
  %br

  //= render 'shared/table'

  .showRounds.edit
    .container
      .round{"ng-repeat"=>"round in league.rounds"}
        .roundTitle
          %h3.number{"ng-bind"=>"round.number + ' Round'"}
          .date
            %input{"type"=>"date", "ng-model"=>"round.start_date", "ng-change"=>"updateStartDate(round.id, round.start_date)"}
            %input{"type"=>"date", "ng-model"=>"round.end_date", "ng-change"=>"updateEndDate(round.id, round.end_date)"}
        .match{"ng-repeat"=>"match in round.matches"}
          %span.date{"ng-bind"=>"match.date | date:'yyyy-MM-dd'"}
          //%input{"type"=>"date", "ng-model"=>"match.date", "ng-change"=>"updateMatchDate(match.id, match.date, round.id)"}
          %table
            %tr
              %td
                %select{"ng-model"=>"match.player_1.id",
                        "ng-options"=>"player.id as player.name for player in league.players",
                        "ng-change"=>"updatePlayer($parent.$index, $index, 1)"}
              %td
              %td
              %td
              %td
                %select.success{"ng-model"=>"match.player_2.id",
                        "ng-options"=>"player.id as player.name for player in league.players",
                        "ng-change"=>"updatePlayer($parent.$index, $index, 2)"}
            %tr.playersMatch{"ng-class"=>"match.class"}
              %td{"ng-bind"=>"match.player_1.name", "ng-class"=>"match.player_1.class"}
              %td{"ng-bind"=>"match.player_1_frames"}
              %td{"ng-bind"=>"' : '"}
              %td{"ng-bind"=>"match.player_2_frames"}
              %td{"ng-bind"=>"match.player_2.name", "ng-class"=>"match.player_2.class"}

          %a{"ng-href"=>"leagues/{{league.id}}/rounds/{{round.id}}/matches/{{match.id}}/edit" }
            Edit match




